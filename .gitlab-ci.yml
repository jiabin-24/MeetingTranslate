stages:
  - run

variables:
  ORG_NAME: "NIUAI"
  LOCATION: "eastasia"

# Shared setup for all jobs: prepare powershell, dotnet, node and Az modules on Linux runners
before_script:
  - apt-get update -y
  - apt-get install -y wget apt-transport-https ca-certificates gnupg curl
  - wget -q https://packages.microsoft.com/config/ubuntu/22.04/packages-microsoft-prod.deb -O /tmp/packages-microsoft-prod.deb
  - dpkg -i /tmp/packages-microsoft-prod.deb || true
  - apt-get update -y
  - apt-get install -y powershell dotnet-sdk-8.0 nodejs npm || true
  # PowerShell will be installed by the template when needed on runners that support apt-get.

# Include job definitions from ci/ for distribution and easier management.
include:
  - local: 'ci/templates/azure-login.yml'
  - local: 'ci/deploy.yml'
  - local: 'ci/build.yml'
